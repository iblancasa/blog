<!DOCTYPE html><!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"><![endif]--><!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]--><!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]--><!--[if gt IE 8]><!--><html class="no-js" lang="en"><!--<![endif]--><head><meta charset="utf-8"><title>Cómo utilizar ExpressJS con HTTPS &#8211; iblancasa - Blog</title><meta name="description" content="Una pequeña guía sobre cómo utilizar ExpressJS, el paquete de NodeJS, para funcionar sobre HTTPS en vez de HTTP"><meta name="keywords" content="nodejs, javascript, ssl, tls, https, http, server, servidor, programar, guía, tutorial"><meta name="twitter:title" content="Cómo utilizar ExpressJS con HTTPS"><meta name="twitter:description" content="Una pequeña guía sobre cómo utilizar ExpressJS, el paquete de NodeJS, para funcionar sobre HTTPS en vez de HTTP"><meta name="twitter:site" content="@iblancasa"><meta name="twitter:creator" content="@iblancasa"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://blog.iblancasa.com/images/default-thumb.png"><meta property="og:locale" content="es_ES"><meta property="og:type" content="article"><meta property="og:title" content="Cómo utilizar ExpressJS con HTTPS"><meta property="og:description" content="Una pequeña guía sobre cómo utilizar ExpressJS, el paquete de NodeJS, para funcionar sobre HTTPS en vez de HTTP"><meta property="og:url" content="http://blog.iblancasa.com/article/tutoriales/como-usar-expressjs-con-https/"><meta property="og:site_name" content="iblancasa - Blog"><meta property="og:image" content="http://blog.iblancasa.com/images/default-thumb.png"><link rel="canonical" href="http://blog.iblancasa.com/article/tutoriales/como-usar-expressjs-con-https/"><link href="http://blog.iblancasa.com/feed.xml" type="application/atom+xml" rel="alternate" title="iblancasa - Blog Feed"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="http://blog.iblancasa.com/assets/css/main.css"><meta http-equiv="cleartype" content="on"><!--[if lt IE 9]><script src="http://blog.iblancasa.com/assets/js/vendor/html5shiv.min.js"></script>
	<script src="http://blog.iblancasa.com/assets/js/vendor/respond.min.js"></script><![endif]--><script src="http://blog.iblancasa.com/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script><link href="//fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700%7CPT+Serif:400,700,400italic" rel="stylesheet" type="text/css"></head><body class="post"><!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]--><div class="navigation-wrapper"><div class="site-name"><a href="http://blog.iblancasa.com/">iblancasa - Blog</a></div><div class="top-navigation"><nav role="navigation" id="site-nav" class="nav"><ul><li><a href="http://iblancasa.com" target="_blank">Autor</a></li><li><a href="http://blog.iblancasa.com/posts/">Todas las publicaciones</a></li><li><a href="http://blog.iblancasa.com/calendario/">Eventos</a></li></ul></nav></div></div><div id="main" role="main"><div class="article-author-side"><div itemscope itemtype="http://schema.org/Person"><img src="http://blog.iblancasa.com/images/bio-photo.jpg" class="bio-photo" alt="Israel Blancas bio photo"><h3 itemprop="name">Israel Blancas</h3><p>De Granada. Programador. Recién finalizado el Grado de Ingeniería Informática UGR</p><a href="http://twitter.com/iblancasa" class="author-social" target="_blank"><i class="fa fa-fw fa-twitter-square"></i> Twitter</a> <a href="http://linkedin.com/in/iblancasa" class="author-social" target="_blank"><i class="fa fa-fw fa-linkedin-square"></i> LinkedIn</a> <a href="http://instagram.com/iblancasa93" class="author-social" target="_blank"><i class="fa fa-fw fa-instagram"></i> Instagram</a> <a href="http://github.com/iblancasa" class="author-social" target="_blank"><i class="fa fa-fw fa-github"></i> Github</a> <a href="https://youtube.com/user/iblancasa" class="author-social" target="_blank"><i class="fa fa-fw fa-youtube-square"></i> Youtube</a></div></div><article class="post"><div class="headline-wrap"><h1><a href="http://blog.iblancasa.com/article/tutoriales/como-usar-expressjs-con-https/" rel="bookmark" title="Cómo utilizar ExpressJS con HTTPS">Cómo utilizar ExpressJS con HTTPS</a></h1></div><div class="article-wrap"><p><img src="http://fotos.subefotos.com/6529a9aca846a939dac313a0b1a2dbc4o.jpg" alt="HHTPS Node ExpressJS"></p><p>En esta guía voy a explicar, brévemente, como hacer que nuestro servidor realizado con <a href="https://nodejs.org">NodeJS</a> (mediante el paquete <a href="http://expressjs.com/">ExpressJS</a>). Si no sabes Javascript, no conoces nada de NodeJS y/o no conoces ExpressJS, comienza por ahí y vuelve aquí más tarde (es fácil, no tardarás mucho tiempo en volver).</p><h2 id="generando-los-certificados">Generando los certificados</h2><p>Primero será necesario generar los certificados del servidor. Cuando un usuario acceda a nuestro sitio web, obtendrá un aviso indicando que la conexión no es segura, debido a que el certificado no estará firmado por una entidad de certificación. Puedes adquirir certificados a través de Internet.</p><p>Podemos generar nuestros propios certificados. La conexión seguriá estando cifrada, aunque los navegadores no podrán certificar que el servidor sea el correcto (es decir, que los usuarios no están sufriendo un <a href="https://es.wikipedia.org/wiki/Ataque_Man-in-the-middle">“man-in-the-middle”</a>, por ejemplo).</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash">openssl genrsa -out chat-key.pem 1024
openssl req -new -key chat-key.pem -out certrequest.csr
openssl x509 -req -in certrequest.csr -signkey chat-key.pem -out chat-cert.pem</code></pre></figure><h2 id="editando-el-cdigo">Editando el código</h2><p>Simplemente, colocaremos los ficheros generados anteriormente dentro de nuestra aplicación y los referenciaremos desde el fichero donde se lance el servidor. La ruta será relativa al “package.json”. Las claves las introduciremos en un diccionario y las pasaremos como parámetro a la hora de crear el servidor.</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">hskey</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s1">&#39;chat-key.pem&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">hscert</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s1">&#39;chat-cert.pem&#39;</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">key</span><span class="o">:</span> <span class="nx">hskey</span><span class="p">,</span>
  <span class="nx">cert</span><span class="o">:</span> <span class="nx">hscert</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;https&#39;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">https</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="nx">app</span><span class="p">);</span></code></pre></figure><p>Como podemos apreciar, respecto al “código clásico” de ejemplo, el resto del código cambia poco.</p><p>Estos certificados deben generarse con la máquina que servirá las peticiones, es decir, con el servidor. No funcionará si generamos los certificados en nuestro ordenador personal y lo subimos a un VPS, por ejemplo.</p><hr><footer role="contentinfo"><div class="social-share"><h4>Compartir en...</h4><ul><li><a href="https://twitter.com/intent/tweet?text=http://blog.iblancasa.com/article/tutoriales/como-usar-expressjs-con-https/" class="twitter" title="Share on Twitter"><i class="fa fa-twitter"></i><span>Twitter</span></a></li><li><a href="https://www.facebook.com/sharer/sharer.php?u=http://blog.iblancasa.com/article/tutoriales/como-usar-expressjs-con-https/" class="facebook" title="Share on Facebook"><i class="fa fa-facebook"></i><span>Facebook</span></a></li><li><a href="https://plus.google.com/share?url=http://blog.iblancasa.com/article/tutoriales/como-usar-expressjs-con-https/" class="google-plus" title="Share on Google Plus"><i class="fa fa-google-plus"></i><span>Google+</span></a></li></ul></div><p class="byline"><strong>Cómo utilizar ExpressJS con HTTPS</strong> publicado en <time datetime="2015-11-19T00:00:00+00:00">November 19, 2015</time>.</p></footer></div></article></div><div class="footer-wrap"><div class="related-articles"><h4>Tambi&eacute;n podría gustarte <small class="pull-right">(<a href="http://blog.iblancasa.com/posts/">Ver todos los posts</a>)</small></h4><ul><li><a href="http://blog.iblancasa.com/article/tutoriales/sinfonier-como-ejecutarlo/" title="Comentando Sinfonier y un arreglillo">Comentando Sinfonier y un arreglillo</a></li><li><a href="http://blog.iblancasa.com/article/eventos/hacking-miniblip/" title="Hacking Miniblip">Hacking Miniblip</a></li><li><a href="http://blog.iblancasa.com/article/tutoriales/docker/" title="Docker">Docker</a></li></ul><hr></div><footer><span>&copy; 2016 Israel Blancas. Sobre <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> con <a href="http://mademistakes.com/minimal-mistakes/" rel="nofollow">Minimal Mistakes</a> theme.</span></footer></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script><script>window.jQuery||document.write('<script src="http://blog.iblancasa.com/assets/js/vendor/jquery-1.9.1.min.js"><\/script>');</script><script src="http://blog.iblancasa.com/assets/js/scripts.min.js"></script><script src="/assets/js/plugins/jekyll-search.js"></script></body></html>